(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/form"],{"0915":function(e,t,r){"use strict";(function(e){r("a3b9");a(r("66fd"));var t=a(r("5d88"));function a(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=r,e(t.default)}).call(this,r("543d")["createPage"])},1039:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(r("5ab3")),n=i(r("981c")),s=i(r("f7c0"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return f(e)||d(e,t)||c(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function d(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],a=!0,n=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done);a=!0)if(r.push(i.value),t&&r.length===t)break}catch(l){n=!0,s=l}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw s}}return r}}function f(e){if(Array.isArray(e))return e}var h={data:function(){return{index:-1,loadModal:!1,imgList:[],modalName:null,drawerName:null,textareaAValue:"",uploadFilePath:"",errorMessage:"",wxUsers:[],isMany:!1,selectWxUsers:[],selectWxUserIds:[]}},methods:{ChooseImage:function(){var t=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["camera"],success:function(r){console.log("chooseImage",r),0!=t.imgList.length?t.imgList=t.imgList.concat(r.tempFilePaths):t.imgList=r.tempFilePaths,t.loadModal=!0,e.uploadFile({url:a.default+"api/services/client/File/UploadImage",filePath:r.tempFilePaths[0],header:{"content-type":"application/json"},name:"file",success:function(e){console.log(e.data);var r=JSON.parse(e.data);t.uploadFilePath=r.result.path,t.loadModal=!1}})}})},ViewImage:function(t){e.previewImage({urls:this.imgList,current:t.currentTarget.dataset.url})},DelImg:function(t){var r=this;e.showModal({title:"提示",content:"确定要删除这张照片吗？",cancelText:"取消",confirmText:"确定",success:function(e){e.confirm&&r.imgList.splice(t.currentTarget.dataset.index,1)}})},LoadModal:function(t){var r=this,a=s.default.get("Session");if(a){this.loadModal=!0;var i=s.default.getUser(),l=this.selectWxUserIds.toString();console.log(l),n.default.post("api/services/client/MoYuRecord/Create",{wxUserId:i.id,imageUrl:this.uploadFilePath,desc:this.textareaAValue,openId:i.openId,togetherWxUsers:l}).then((function(t){var a=o(t,2),n=(a[0],a[1]);1==n.data.success?(r.loadModal=!1,e.redirectTo({url:"/pages/index/index"})):(r.loadModal=!1,r.errorMessage=n.data.error.message,r.modalName="Error")}))}else e.redirectTo({url:"/pages/index/login"})},textareaAInput:function(e){this.textareaAValue=e.detail.value},hideModal:function(e){this.modalName=null},showDrawerModal:function(t){var r=this,a=s.default.get("Session");if(a){this.drawerName=t.currentTarget.dataset.target,this.loadModal=!0;var i=s.default.getUser();n.default.get("api/services/client/WxUser/GetWxUsers?id="+i.id).then((function(e){var t=o(e,2),a=(t[0],t[1]);1==a.data.success?(r.loadModal=!1,r.wxUsers=Object.assign(a.data.result,r.wxUsers)):(r.loadModal=!1,r.errorMessage=a.data.error.message,r.modalName="Error")}))}else e.redirectTo({url:"/pages/index/login"})},hideDrawerModal:function(e){this.drawerName=null},CheckboxChange:function(e){this.selectWxUserIds=e.detail.value,console.log(this.selectWxUserIds);for(var t=0,r=this.wxUsers.length;t<r;++t){this.wxUsers[t].isChecked=!1;for(var a=0,n=this.selectWxUserIds.length;a<n;++a)if(this.wxUsers[t].id==this.selectWxUserIds[a]){this.wxUsers[t].isChecked=!0;break}}this.selectWxUsers=this.wxUsers.filter((function(e){return e.isChecked}))},IsMany:function(e){this.isMany=e.detail.value}}};t.default=h}).call(this,r("543d")["default"])},"3efc":function(e,t,r){"use strict";r.r(t);var a=r("1039"),n=r.n(a);for(var s in a)"default"!==s&&function(e){r.d(t,e,(function(){return a[e]}))}(s);t["default"]=n.a},"5d88":function(e,t,r){"use strict";r.r(t);var a=r("9f9f"),n=r("3efc");for(var s in n)"default"!==s&&function(e){r.d(t,e,(function(){return n[e]}))}(s);r("6df6");var i,o=r("f0c5"),l=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],i);t["default"]=l.exports},"6df6":function(e,t,r){"use strict";var a=r("a11b"),n=r.n(a);n.a},"9f9f":function(e,t,r){"use strict";var a;r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return a}));var n=function(){var e=this,t=e.$createElement;e._self._c},s=[]},a11b:function(e,t,r){}},[["0915","common/runtime","common/vendor"]]]);